{"version":3,"file":"js/115.05a59f2d.js","mappings":"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","sources":["webpack://github-blog/./src/views/ArchivePage.vue","webpack://github-blog/./src/views/ArchivePage.vue?ee48"],"sourcesContent":["<template>\n    <div class=\"container\">\n        <div class=\"body\">\n            <h1>归档</h1>\n            <div class=\"blog-number\">共{{ this.blogs.length }}篇文章</div>\n            <div class=\"blogs\" v-for=\"year in orderedYears\" :key=\"year\" :id=\"year\">\n                <div class=\"year\"><i class=\"iconfont icon-blogzhankai icon-archive\"></i>\n                    <span>{{ year }}</span>\n                </div>\n                <ul class=\"blog-list\" :key=\"year\">\n                    <li class=\"blog-item\" v-for=\"blog in blogsByYear[year]\" :key=\"blog.fileName\"\n                        @click=\"navToDetailPage(blog)\">\n                        <div class=\"blog-date\">{{ blog.createDate }}</div>\n                        <div class=\"blog-title\">{{ blog.title }}</div>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\nimport { useBlogStore } from '../store/blogstore.js'\nimport { storeToRefs } from 'pinia'\n\nexport default {\n    data() {\n        return {\n            blogs: [],\n            blogYears: {},\n            invisibleYears: [],\n            scrollTop: 0,\n            selectYear: \"\"\n        }\n    },\n\n    computed: {\n        orderedYears() {\n            console.log(\"orderedYears\", this.blogYears)\n            const orderedYears = Object.keys(this.blogYears).sort((a, b) => b - a)\n            return orderedYears\n        },\n        blogsByYear() {\n            const blogsByYear = {}\n            for (const blog of this.blogs) {\n                const year = blog.createDate.slice(0, 4)\n                if (blogsByYear[year]) {\n                    blogsByYear[year].push(blog)\n                } else {\n                    blogsByYear[year] = [blog]\n                }\n            }\n            return blogsByYear\n        },\n    },\n\n    watch: {\n        '$route': \"scrollToYear\"\n    },\n\n    //在页面加载完毕后，让页面滑动到指定年份\n\n    activated() {\n        console.log(\"activated\")\n        const blogStore = useBlogStore()\n        const { blogList, years } = storeToRefs(blogStore)\n        this.blogYears = years\n        this.blogs = blogList\n        document.querySelector('.body').scrollTop = this.scrollTop\n    },\n\n\n    beforeRouteLeave(to, from, next) {\n        console.log(\"beforeRouteLeave\", document.querySelector('.body'))\n        //获取页面中content的scrollTop\n        this.scrollTop = document.querySelector('.body').scrollTop\n        console.log(\"scrollTop\", this.scrollTop, to, from)\n        next()\n        console.log(\"beforeRouteLeave\", this.scrollTop)\n    },\n\n    methods: {\n        navToDetailPage(blog) {\n            this.$router.push({\n                name: 'detail',\n                //传递blog参数到detail页面\n                query: {\n                    fileName: blog.fileName\n                }\n            })\n        },\n\n        toogleYear(year) {\n            const index = this.invisibleYears.indexOf(year)\n            if (index === -1) {\n                this.invisibleYears.push(year)\n            } else {\n                this.invisibleYears.splice(index, 1)\n            }\n        },\n\n        isYearVisible(year) {\n            return !this.invisibleYears.includes(year)\n        },\n\n        scrollToYear() {\n            const selectYear = this.$route.query.year\n            console.log(\"scrollToYear\", selectYear, this.selectYear)\n            if (selectYear && this.selectYear !== selectYear) {\n                console.log(\"scrollToYear2\", selectYear, this.selectYear)\n                this.selectYear = selectYear\n                this.$nextTick(() => {\n                    const yearElement = document.getElementById(selectYear)\n                    if (yearElement) {\n                        yearElement.scrollIntoView()\n                    }\n                })\n            }\n        }\n    }\n}\n\n</script>\n\n<style scoped>\nh1 {\n    font-weight: 200;\n}\n\n.container {\n    width: 100%;\n    height: 100%;\n}\n\n.body {\n    padding-left: 40px;\n    height: 100%;\n    overflow: scroll;\n}\n\n.body::-webkit-scrollbar {\n    display: none;\n}\n\n.blog-number {\n    color: #777777;\n    font-size: 16px;\n    margin-bottom: 20px;\n}\n\n.blog-list {\n    padding-inline-start: 0px;\n    display: inline-block;\n}\n\n.close-enter-active,\n.close-leave-active {\n    transition: all 2s ease;\n}\n\n.close-enter-from,\n.close-leave-to {\n    transform: translateY(-100%);\n}\n\n.blogs{\n    margin-bottom: 20px;\n}\n\n.blog-item {\n    list-style-type: none;\n    line-height: 50px;\n    color: #777777;\n    font-size: 16px;\n    display: flex;\n    flex-direction: row;\n\n    &:hover {\n        text-decoration: underline;\n    }\n}\n\n.blog-title,\n.blog-date {\n    display: inline-block;\n}\n\n.blog-date {\n    width: 120px;\n}\n\n.year {\n    padding-top: 15px;\n    font-weight: 200;\n    font-size: 16px;\n}\n\n.icon-archive {\n    color: black;\n    font-size: 16px;\n    margin-right: 4px;\n}\n</style>","import { render } from \"./ArchivePage.vue?vue&type=template&id=ab9e7ae0&scoped=true\"\nimport script from \"./ArchivePage.vue?vue&type=script&lang=js\"\nexport * from \"./ArchivePage.vue?vue&type=script&lang=js\"\n\nimport \"./ArchivePage.vue?vue&type=style&index=0&id=ab9e7ae0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ab9e7ae0\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","blogs","length","_Fragment","_renderList","$options","orderedYears","year","key","id","_hoisted_6","_hoisted_7","blogsByYear","blog","fileName","onClick","$event","navToDetailPage","_hoisted_9","createDate","_hoisted_10","title","data","blogYears","invisibleYears","scrollTop","selectYear","computed","console","log","this","Object","keys","sort","a","b","slice","push","watch","activated","blogStore","useBlogStore","blogList","years","storeToRefs","document","querySelector","beforeRouteLeave","to","from","next","methods","$router","name","query","toogleYear","index","indexOf","splice","isYearVisible","includes","scrollToYear","$route","$nextTick","yearElement","getElementById","scrollIntoView","__exports__","render"],"sourceRoot":""}