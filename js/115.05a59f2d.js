"use strict";(self["webpackChunkgithub_blog"]=self["webpackChunkgithub_blog"]||[]).push([[115],{5115:function(e,o,s){s.r(o),s.d(o,{default:function(){return k}});var l=s(3396),t=s(7139);const i=e=>((0,l.dD)("data-v-ab9e7ae0"),e=e(),(0,l.Cn)(),e),r={class:"container"},a={class:"body"},c=i((()=>(0,l._)("h1",null,"归档",-1))),n={class:"blog-number"},u=["id"],b={class:"year"},d=i((()=>(0,l._)("i",{class:"iconfont icon-blogzhankai icon-archive"},null,-1))),g=["onClick"],h={class:"blog-date"},Y={class:"blog-title"};function v(e,o,s,i,v,y){return(0,l.wg)(),(0,l.iD)("div",r,[(0,l._)("div",a,[c,(0,l._)("div",n,"共"+(0,t.zw)(this.blogs.length)+"篇文章",1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(y.orderedYears,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"blogs",key:e,id:e},[(0,l._)("div",b,[d,(0,l._)("span",null,(0,t.zw)(e),1)]),((0,l.wg)(),(0,l.iD)("ul",{class:"blog-list",key:e},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(y.blogsByYear[e],(e=>((0,l.wg)(),(0,l.iD)("li",{class:"blog-item",key:e.fileName,onClick:o=>y.navToDetailPage(e)},[(0,l._)("div",h,(0,t.zw)(e.createDate),1),(0,l._)("div",Y,(0,t.zw)(e.title),1)],8,g)))),128))]))],8,u)))),128))])])}s(7658);var y=s(9658),p=s(2578),f={data(){return{blogs:[],blogYears:{},invisibleYears:[],scrollTop:0,selectYear:""}},computed:{orderedYears(){console.log("orderedYears",this.blogYears);const e=Object.keys(this.blogYears).sort(((e,o)=>o-e));return e},blogsByYear(){const e={};for(const o of this.blogs){const s=o.createDate.slice(0,4);e[s]?e[s].push(o):e[s]=[o]}return e}},watch:{$route:"scrollToYear"},activated(){console.log("activated");const e=(0,y.N)(),{blogList:o,years:s}=(0,p.Jk)(e);this.blogYears=s,this.blogs=o,document.querySelector(".body").scrollTop=this.scrollTop},beforeRouteLeave(e,o,s){console.log("beforeRouteLeave",document.querySelector(".body")),this.scrollTop=document.querySelector(".body").scrollTop,console.log("scrollTop",this.scrollTop,e,o),s(),console.log("beforeRouteLeave",this.scrollTop)},methods:{navToDetailPage(e){this.$router.push({name:"detail",query:{fileName:e.fileName}})},toogleYear(e){const o=this.invisibleYears.indexOf(e);-1===o?this.invisibleYears.push(e):this.invisibleYears.splice(o,1)},isYearVisible(e){return!this.invisibleYears.includes(e)},scrollToYear(){const e=this.$route.query.year;console.log("scrollToYear",e,this.selectYear),e&&this.selectYear!==e&&(console.log("scrollToYear2",e,this.selectYear),this.selectYear=e,this.$nextTick((()=>{const o=document.getElementById(e);o&&o.scrollIntoView()})))}}},T=s(89);const w=(0,T.Z)(f,[["render",v],["__scopeId","data-v-ab9e7ae0"]]);var k=w}}]);
//# sourceMappingURL=115.05a59f2d.js.map